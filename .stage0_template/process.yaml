$schema: "https://stage0/schemas/process.schema.yaml"
$id: "https://stage0/stage0_template_vue_utils/process.yaml"
title: Process file for Vue SPA utility library template
version: "1.0"

environment:

context:
  - key: info
    type: path
    path: specifications.product.info
  - key: org
    type: path
    path: specifications.product.organization
  - key: dictionaries
    type: path
    path: specifications.catalog.data_dictionaries
  - key: architecture
    type: path
    path: specifications.architecture.architecture
  - key: common_code
    type: selector
    path: architecture.domains
    filter:
      property: name
      value: "common_code"
  - key: api_utils
    type: selector
    path: common_code.repos
    filter:
      property: name
      value: "api_utils"
  - key: spa_utils
    type: selector
    path: common_code.repos
    filter:
      property: name
      value: "spa_utils"

requires:
  - info.name
  - info.slug
  - info.db_name
  - info.base_port
  - org.name
  - org.git_org
  - dictionaries   
  - architecture.domains
  - common_code
  - api_utils.port
  - spa_utils.port

templates:
  - path: "./LICENSE"
    merge: true
  - path: "./README.md.template"
    output: "./README.md"
    merge: true
  - path: "./CONTRIBUTING.md"
    merge: true
  - path: "./Makefile"
    output: "/dev/null"
    merge: true
  - path: ".npmrc"
    merge: true
  - path: "./package.json"
    merge: true
  - path: "./.github/workflows/ci.yml"
    merge: true
  - path: "./vite.config.dev.ts"
    merge: true
  - path: "./cypress.config.ts"
    merge: true

